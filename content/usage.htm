<html>
	<head>
		<title>Your Internet Usage</title>
		<style>
			body { background-color: #888888 }
			#foo { background-color: #eeeeee; border: 2px solid black; padding: 1em; position: absolute }
			#bar { border: 2px solid black; margin: 1em; margin-top: 0; height: 28px }
			#barfill { background-color: #004488; border: 0px; margin: 0px; height: 28px; width: 0% }
			
			.field { color: #004488 }
			
			h1,h2 { font-family: Segoe UI, Trebuchet MS; text-align: center }
		</style>
		<script>
		<!--
			var size_installed = false;
			var dsx = 600; var dsy = 250;
			
			function do_size()
			{
				if (!size_installed)
					window.onresize = do_size;
		
				var e = document.getElementById( "foo" );
				var w = window.innerWidth;
				var h = window.innerHeight;
				
				if (w == null) w = document.body.clientWidth;
				if (h == null) h = document.body.clientHeight;
					
				e.style.position = "absolute";				
				e.style.left = (w - dsx) / 2;
				e.style.width = dsx;
				e.style.top = (h - dsy) / 2;
				e.style.height = dsy;
			}
			
			function do_ajax()
			{
				var req = window.XMLHttpRequest ?
					new XMLHttpRequest() : new ActiveXObject( "Microsoft.XMLHTTP" );
				req.onreadystatechange = function()
				{
					if (req.readyState == 4)
					{
					//	alert( req.status + ":" + req.responseText );
						merge_data( eval( "(" + req.responseText + ")" ) );
						setTimeout( "do_ajax()", 2000 );
					}
				}
				req.open( "GET", "/usage", true );
				req.send(null);
			}
			
			function merge_data( d )
			{
				for( var k in d )
				{
					var e = document.getElementById( k );
					if (e)
						e.innerHTML = d[k];
				}
				
				document.getElementById( "barfill" )
					.style.width = d.fill + "%";
			}
			
		//-->
		</script>
	</head>
	<body>
		<div id="foo">
		<h1>Welcome, <span id="uname" class="field">---</span>!</h1>
				<h2> Since <span id="start" class="field">---</span>, you've used<br/>
				<span id="current" class="field">---</span> 
					of your <span id="quota" class="field">---</span> quota.
				<br/>(<span id="days" class="field">---</span> days remaining)</h2>
			<table width="100%"><tr><td id="bar">
				<div id="barfill"></div>
			</td></tr></table>
		</div>
		<script>
		<!--
			do_size(); do_ajax();
		//-->
		</script>
	</body>
</html>
