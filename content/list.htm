<html>
	<head>
		<title>Your Internet Usage</title>
		<style>
			body { background-color: #888888; font-family: Segoe UI, Trebuchet MS }
			#foo { background-color: #eeeeee; border: 2px solid black; padding: 1em; position: absolute }
			.barfill { background-color: #48b4eb; border: 0px; margin: 0px; height: 28px; width: 0% }
			.bartext { position: absolute; color: black; margin-top: -3px; margin-left: 0.3em }
			
			h1 { text-align: center }
			
			.user { font-size: 18pt; font-weight: bold }
			.uname { padding-right: 1em }
			.usage { border: 2px solid black; }
		</style>
		<script src="jquery-1.2.3.js"></script>
		<script>
		<!--
			var size_installed = false;
			var dsx = 600;
			
			function do_size()
			{
				if (!size_installed)
					window.onresize = do_size;
		
				var e = $("#foo").get(0);
				var w = window.innerWidth;
				
				if (w == null) w = document.body.clientWidth;
					
				e.style.position = "absolute";				
				e.style.left = (w - dsx) / 2;
				e.style.width = dsx;
			}
			
			function do_ajax()
			{
				$.ajax({
				type: "GET",
				url: "list",
				success: function(data, textStatus)
				{
					merge_data( eval( "([" + data + "])" ) );
					setTimeout( "do_ajax()", 2000 );
				}
				});
			}

			function format_row( d )
			{
				return "<tr class=\"user\"><td class=\"uname\">" + d.uname + "</td>"
					+ "<td class=\"usage\" width=\"100%\">"
					+ "<div class=\"bartext\" style=\"width:200px\">" + d.current + "</div>"
					+ "<div class=\"barfill\" style=\"width:" + d.fill + "%\"></div></td></tr>"
			}
			
			function merge_data( d )
			{
				var s = "";
				for( var i = 0; i < d.length; i++ )
				  s += format_row( d[i] );
				  
				$("table").html(s);
			}
			
			$(function(){ do_size(); do_ajax(); });
		//-->
		</script>
	</head>
	<body>
		<div id="foo">
		<h1>Usage Summary</h1>
			<table width="100%" id="table">
			</table>
		</div>
	</body>
</html>
