<html>
<head>
	<title>MAC Address to User Bindings</title>
	<link type="text/css" rel="Stylesheet" href="main.css" />
	<style>
		.macs { font-weight: normal; }
	</style>
	<script src="jquery-1.2.3.min.js"></script>
	<script src="common.js"></script>
	<script>
	<!--
		function format_row( d )
		{
			return "<tr class=\"user\"><td class=\"uname\">" + d.uname + "</td>"
				+"<td class=\"macs\">" + d.macs + "</td>"
				+"</tr>";
		}
		
		function merge_data( data )
		{
			var s = "";
			for ( var i = 0; i < data.length; i++ )
				s += format_row( data[i] );
				
			$("table").html(s);
		}
		
		$(function() 
		{ 
			dialogs = $("#foo, #error, #wait");
			
			show_dialog( $( "#wait" ) );
			
			var f = function(data)
			{
				show_dialog( $( "#foo" ) );
				if (data != "{}")
					merge_data( eval( "([" + data + "])" ) );
			};
			
			do_ajax("query/bindings", f);
			window.onresize = function() { show_dialog( current_dialog ); }; 
		});
	//-->
	</script>
</head>
<body>
	<div id="foo" style="width: 500px">
	<h1>MAC address->User</h1>
		<table width="100%" id="table">
		</table>
	</div>
	<div id="error">
		<h2>We're having trouble retrieving data from the router.</h2>
	</div>
	<div id="wait">
		<h2>Downloading usage data...</h2>
	</div>
</body>
</html>